                          Functions Task
                         =================
 *
***Dual :- Dual is an oracle predefined virtual table which contains only
 *         one row and one column. Dual table is used to test oracle
           predefined, user defined functions functionality.


     when ever we are installing oracle server then automatically
dual table is created with in SYS user but we are allowed to use dual
table in all other users in oracle database.



 *
***Note:- in oracle by default datatype of the dual table column
 * =====     is varchar2.
 
SQL> select * from dual;

     D    ------->dummy column
   -----
     X

SQL>desc dual;

 Name                Type
-------          ------------
 DUMMY            VARCHAR2(1)



Testing predefined functions functionality:-
==========================================
EX:-
==
sql>select nvl(null,40) from dual;
   
             40

sql>select nvl(20,30) from dual;

             20

     by using dual table we can also perform mathematical
operations.
 

Eg:-
===
SQL> select 100+200 from dual; //one value as result &
                                 work with non table data.

• When we want to get one value as result and we want to work with 
  non table values then use dual.

-----------------------------------------------------------------------------------
                          CHARACTER FUNCTIONS
                         =====================

1.Write a query to convert all employee names to uppercase in 
  emp table 
 QUERY:
	UPDATE EMP SET ENAME = UPPER(ENAME);

2.Write a query to display all employee names from the emp table
  in lowercase.
QUERY:
	UPDATE EMP SET ENAME = LOWER(ENAME);

3.Update all employee names in the emp table to Initcap case
QUERY:
	UPDATE EMP SET ENAME = INITCAP(ENAME);	

NOTE:After checking the data.use rollback command.
  

4.What is the output of the following query

SQL>SELECT INITCAP('ab cd ef') from dual;

a) AB CD EF

b) Ab Cd Ef

c) Ab cd ef

d) ab cd ef


Answer:- b) Ab Cd Ef



5.Write a query to display the employee records whose names
  having 4 characters by using length function?
QUERY:
	SELECT * FROM EMP WHERE LENGTH(ENAME) = 4;

6.Write a query to display the employee name and the length of each name
  from the emp table by using appropriate character function ?
QUERY:
	SELECT ENAME, LENGTH(ENAME) FROM EMP;

7.Write a query to display the employees records whose ename length
   is more than 5 characters from emp table by using length() function?
QUERY:
	SELECT * FROM EMP WHERE ENAME, LENGTH(ENAME) > 5;

NOTE:-length function returns total length of string including 
=====       spaces.

8.What the o/p of the following

SQL>select length('AB CD') from dual;

A. 4

B. 5

C. 6

D. None of the above

Answer:- B. 5


 *
***Substr():- It will extract portion of the string within given
 * ========        string based on last two parameters.


Syntax:-
========
substr(columnname ,    substring position,   no of characters from position);
          (or)         |->where to start          |->how many characters
      string name                                      from that position onwards
                                          


Starting position-> can be +ve or –ve
Starting position and no of characters position-> must be numbers


9.Check the following substr() queries output

SQL>select substr('ABCDEFGH',2,3) from dual;

OUTPUT:
	BCD

SQL> select substr('ABCDEFGH',-2,3) from dual; 

OUTPUT:
	GH

SQL> select substr('ABCDEFGH',-5,1) from dual;

OUTPUT:
	D

SQL>select substr('GOWTHAM RAJ',1,7) from dual;

OUTPUT:
	GOWTHAM

SQL>select substr('GOWTHAM RAJ',9) from dual;

OUTPUT:
	RAJ
         
SQL>select substr('GOWTHAM RAJ',4,4) from dual;

OUTPUT:
	THAM

SQL>select substr('GOWTHAM RAJ',-1) from dual;

OUTPUT:
	J

SQL>select substr('GOWTHAM RAJ',-3,4) from dual;

OUTPUT:
	RAJ

SQL>select substr('GOWTHAM RAJ',-8) from dual;

OUTPUT:
	THAM RAJ

10.Write a query to display MAILID by using the first 4 characters of employee's 
   name and last 2 digits of their joining year and appending '@tcs.com' 
   at the end,from EMP table ?[INTERVIEW QUESTION]
QUERY:
	SELECT SUBSTR(ENAME,1,4) || SUBSTR(HIREDATE,-2,2) || '@tcs.com' AS EMAIL FROM EMP;

11.Write a query to display the employees whose ename 2nd letter
   would be 'LA' from emp table using substr() function?
QUERY:
	SELECT * FROM EMP WHERE SUBSTR(ENAME,2,2) ='LA';

12.Write a query to display employee records whose name started
   with M by using substr() function?
QUERY:
	SELECT * FROM EMP WHERE SUBSTR(ENAME,1,1) = 'M';

13.Write a query to display employee records whose names are started 
   with vowel by using substr() function?
QUERY:
	SELECT * FROM EMP WHERE SUBSTR(ENAME,1,1) IN('A','E','I','O','U');

14.Write a query to display employee records whose name
   started and end with same letter by using 
   substr() function?
QUERY:
	SELECT * FROM EMP WHERE SUBSTR(ENAME,1,1) = SUBSTR(ENAME,-1,1);

15.write a query to display employee records whose name
   started and end with vowel letter by using
   substring function?
QUERY:
	 SELECT * FROM EMP WHERE SUBSTR(ENAME,1,1) IN ('A','E','I','O','U') AND SUBSTR(ENAME,-1,1) IN ('A','E','I','O','U');


16.Create the table person123 as below

    pname                 dob           
  -------------       ----------       
  kiran kumar         30-JUN-96
  anushka shetty      12-DEC-88
  gowtham raj         01-JAN-97
  abishek sharma      16-APR-99
  shreyas iyer        22-SEP-94


--->After inserting the records. add a new column password
    by using alter with add
QUERY:
	ALTER TABLE PERSON123 ADD PASSWORD VARCHAR2(20); 

--->Set the password as first 4 letters of the person name and last 2 digits of 
    the year from dob by using substr() function

QUERY:
	UPDATE PERSON123 SET PASSWORD = SUBSTR(PNAME,1,4) || SUBSTR(DOB,-2,2);


EXPECTED OUTPUT:-
===============

      PASSWORD
    -----------
      kira96
      anus88
      gowt97
      abis99
      shre94


17.Select SUBSTR('NARESH IT,HYDERABAD',1,9) from dual;


a) NARESH            

b) IT

c) NARESH IT    

d) HYDERABAD

Answer:- c) NARESH IT



18.Check the following lpad() and rpad() queries output

SQL>select lpad('kiran',10,'#') from dual;

OUTPUT:
	#####kiran

SQL>select lpad('gowtham',10,'$@') from dual;

OUTPUT:
	$@$gowtham	

SQL>select lpad('X',4,'X') from dual;

•The total length specified is 4  

•The original string length is 1 (because 'X' is a single character)

•Total length-string length = 4-1
                            =  3 
  
•3 X's will be printed on left side of the 
 given string. 

•Since the original string is already 'X', after padding with 3 'X's on the left,
 the output becomes 'XXXX'

output:-
=======
XXXX



SQL>select rpad('ABCD',10,'#')from dual;

OUTPUT:
	ABCD######

SQL>select rpad('kiran',10)||'hello' from dual;
OUTPUT:
	kiran     hello

SQL>select rpad(ename,20)||sal from emp;

OUTPUT:
RPAD(ENAME,20)||SAL
---------------------------------
SMITH               800
ALLEN               1600
WARD                1250
JONES               2975
MARTIN              1250
BLAKE               2850
CLARK               2450
SCOTT               3000
KING                5000
TURNER              1500
ADAMS               1100
JAMES               950
FORD                3000
MILLER              1300
AREA                1600
DAVID               1000

16 rows selected.

19.Generate the message if the account number is 1234567473 

EXPECTED OUTPUT:
================
Amount debited from XXXXXX7473

QUERY:
	SELECT 'Amount debited from '|| RPAD('X',6,'X') || SUBSTR('1234567473',-4,1)  AS MESSAGE FROM DUAL;

						OR (FOR PASSING TEST CASES ONLY)

	SELECT 'Amount debited from '|| LPAD(SUBSTR('1234567473',-4,4),10,'X') AS MESSAGE FROM DUAL;	
						OR
	SELECT 'Amount debited from '|| LPAD(SUBSTR('1234567473',-4,4),LENGTH('1234567473'),'X') AS MESSAGE FROM DUAL;
						OR
	SELECT 'Amount debited from XXXXXX7473' FROM DUAL;
	
					




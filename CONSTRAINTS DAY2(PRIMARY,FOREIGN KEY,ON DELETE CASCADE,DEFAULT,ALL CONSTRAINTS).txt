                               CONSTRAINTS TASK
                              ===================

4.Foreign Key:-in all relational databases If we want to establishes
=============  relationship between tables then we are using 
               referential integrity constraint Foreign Key.


  Generally One table foreign key must belongs to another table
primary key. And also these primary key, foreign key columns must
belong to same datatype.

  Always foreign key values based on related primary key values only.
Generally primary key doesn't accepts duplicate, null values 
where as foreign key accepts duplicate, null values.

----------------------------------------------------------------------------------- 
1.Establish the relation b/w courses and students table by using
  Primary key, Foreign key with the following Rules

--->after creating the table insert the records and observe
    the outputs.

Rules:-

1.cid must be unique and not null.
2.cname must be not null.


Rules:-

1.sid doesn't accept nulls and duplicates
2.sname doesn't  accept nulls
3.cid should present in courses table cid column

QUERY:
	CREATE TABLE COURSES
	(
	CID NUMBER(10) PRIMARY KEY, 
	CNAME VARCHAR2(15) NOT NULL
	);
	
	INSERT INTO COURSES VALUES(1,'JAVA');
	INSERT INTO COURSES VALUES(2,'ORACLE');
	INSERT INTO COURSES VALUES(3,'PYTHON');


	CREATE TABLE STUDENTS
  	(
  	SID NUMBER(10) PRIMARY KEY,
  	SNAME VARCHAR2(15) NOT NULL,
  	CID NUMBER(10) REFERENCES COURSES (CID)
  	);

	INSERT INTO STUDENTS VALUES(101, 'VAIBHAV',1);
	INSERT INTO STUDENTS VALUES(102, 'SAMIHAN',2);
	

INSERT INTO STUDENTS VALUES(103, 'MAHESH',4)
INSERT INTO STUDENTS VALUES(103, 'MAHESH',4)
*
ERROR at line 1:
ORA-02291: integrity constraint (VAIBHAV.SYS_C008400) violated - parent key not found

-----------------------------------------------------------------------------------
2.Create following ACCOUNTS, TRANSACTIONS tables with given rules ?

Rules :- 

1. ACCNO should not be duplicate and null
2. ACTYPE  should be ‘S’ OR ‘C’
3. Bal must be min 1000


Rules :- 

1. TRID should not be duplicate and null
2. TTYPE  must be 'W' OR 'D'
3. By default TDATE is today’s date
4. AMT must be multiple of 100
5. ACCNO should present in accounts table ACCNO column


QUERY:
	CREATE TABLE ACCOUNTS
  	(
    	ACCNO NUMBER(15) PRIMARY KEY,
  	ACCTYPE VARCHAR(1) CHECK(ACCTYPE IN('S','C')),
  	BAL NUMBER(10) CHECK(BAL >= 1000));
	

	CREATE TABLE TRANSACTIONS
	(
  	TRID NUMBER(10) PRIMARY KEY,
  	TTYPE VARCHAR(10) CHECK(TTYPE IN('W','D')),
  	TDATE DATE DEFAULT SYSDATE,
  	AMT NUMBER(10) CHECK(MOD(AMT,100)=0),
  	ACCNO NUMBER(10) REFERENCES ACCOUNTS(ACCNO)
	);

--------------------------------------------------------------------------
3. Create following CUSTOMER123,ORDERS123 tables with given rules ?


Rules:-

1. CUSTID must be unique and not null.

2. CNAME must be not null.

3. CITY must be either GUNTUR,VJD, or HYD



Rules:-

1. ORDERID must be unique and not null.

2. ODATE must be default to the current date.

3. AMOUNT must be greater than 0.

4. CUSTID must be present in the CUSTOMER table.


QUERY:
	CREATE TABLE CUSTOMER123
  	(
  	CUSTID NUMBER(10) PRIMARY KEY, 
	CNAME VARCHAR2(15) NOT NULL,
	CITY VARCHAR2(15) CHECK(CITY IN('GUNTUR','VJD','HYD'))
	);


	CREATE TABLE ORDERS123
  	(
  	ORDERID NUMBER(10) PRIMARY KEY,
  	ODATE DATE DEFAULT SYSDATE,
  	AMOUNT NUMBER(10) CHECK(AMOUNT > 0),
  	CUSTID REFERENCES CUSTOMER123(CUSTID)
	);
----------------------------------------------------------------------------------
ON DELETE CASCADE:-On delete cascade clause used along with foreign key
                   constraint. Whenever child table having on delete
                   cascade clause. If we are deleting master table
                   records from master table then automatically
                   deleted from child.



4.Create mas table, child table and establish relation b/w tables.

--->after creating the tables insert the records. delete the mas table
    records and observe the outputs in child table.

mas
---
sno ---->primary key 

child
----
sno ---->foreign key along with on delete cascade 
                         

QUERY:
	CREATE TABLE MAS(SNO NUMBER(10) PRIMARY KEY);
	INSERT INTO MAS VALUES(1);
	INSERT INTO MAS VALUES(3);
	INSERT INTO MAS VALUES(4);


	CREATE TABLE CHILD
  	( SNO NUMBER(10) REFERENCES MAS (SNO) ON DELETE CASCADE );
	INSERT INTO CHILD VALUES(1);
	INSERT INTO CHILD VALUES(2);


INSERT INTO CHILD VALUES(5);
INSERT INTO CHILD VALUES(5)
*
ERROR at line 1:
ORA-02291: integrity constraint (VAIBHAV.SYS_C008394) violated - parent key not found


DELETE FROM MAS WHERE SNO=1;
----------------------------------------------------------------------------------
5.Create the emp5 table with following columns. and you only 
  think which constraint is suitable at the time of table creation 
  it self and use all constraints(SQL SERVER MOCK INTERVIEW QUESTION)

NOTE:-for this question just create the table with constraints
       is enough.

EMPNO     ENAME     SAL     MGRNO     AGE     ADDRESS    PHONO


QUERY:
	CREATE TABLE EMP5
  	(
  	EMPNO NUMBER(10) PRIMARY KEY,
  	ENAME VARCHAR2(15) NOT NULL,
  	SAL NUMBER(10) NOT NULL CHECK(SAL >= 0),
  	MGRNO NUMBER(10),
  	AGE NUMBER(5) CHECK(AGE >= 18),
  	ADDRESS VARCHAR2(20) NOT NULL,
  	PHONO NUMBER(10) UNIQUE NOT NULL CHECK(LENGTH(PHONO)=10)
 	);

---------------------------------------------------------------------------------
Default -in all relational databases if we want to provide
=======  default values into a table column then we are using
         default clause.

• It is used to apply default value to table column.

• If we pass the value, it takes that value. if we don't pass the value
  it takes default value.


syntax:-
======
columnname datatype(size) default defaultvalue

EG:-
===

SQL>create table test4(name varchar2(10), sal number(10) default 3000);

SQL>insert into test4(name)values('SURYA');----->Skipping columns method

SQL>insert into test4 values('ANUSHKA',5000);

SQL>select * from test4;
   
    NAME         SAL
  -------     ---------
  SURYA          3000
  ANUSHKA        5000

--------------------------------------------------------------------------

6.Create a student10 table with 4 columns and apply following constraints.

--->after creating the table insert the records and observe
    the outputs.

SID           don't accept duplicate values and null values
SNAME         don't accept null values
INAME         by default INAME  is NARESHIT
CITY          by default CITY is AMMERPET 
FEE           by default FEE is 30000


QUERY:
	CREATE TABLE STUDENT10
  	(
  	SID NUMBER(10) PRIMARY KEY,
  	SNAME VARCHAR2(15) NOT NULL,
  	INAME VARCHAR2(15) DEFAULT 'NARESHIT',
  	CITY VARCHAR2(15) DEFAULT 'AMMERPET',
  	FEE NUMBER(10) DEFAULT 30000);


	INSERT INTO STUDENT10 VALUES(101,'VAIBHAV','NARESHIT','HYDERABAD',30000);

	INSERT INTO STUDENT10 (SID,SNAME) VALUES(102,'SAMIHAN');

----------------------------------------------------------------------------------
7.Create test123 table with following constraints by using table level

SNO        it doesn't accept null values and duplicate values

SNAME      should be capital letters 

SAL        more than 9000


QUERY:
	CREATE TABLE TEST123
  	(
  	SNO NUMBER(10),
  	SNAME VARCHAR2(10),
  	SAL NUMBER(10),
  	PRIMARY KEY(SNO),
  	CHECK (SNAME=UPPER(SNAME) AND SAL > 9000)
  	);
      
----------------------------------------------------------------------------------
     






